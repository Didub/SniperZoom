!function(o){o.fn.sniperZoom=function(e){var n,i,t,a,m,r,s,l,c=o.extend({cursor:"crosshair",allowzoom:!1,minzoom:2,maxzoom:8},e),u=this,p=u.attr("src"),d=c.minzoom,g={init:function(){n=u.width(),i=u.height()},styleElements:function(){var e=g.generateRandomId();(o("#sniperzoom-wrapper"+e).length>=1||o("#sniperzoom-zoom"+e).length>=1)&&(e=g.generateRandomId()),u.wrap("<div id='sniperzoom-wrapper"+e+"'></div>"),a=o("#sniperzoom-wrapper"+e),m=a.offset(),a.css({position:"relative",cursor:c.cursor,display:"-moz-inline-stack",display:"inline-block",verticalAlign:"top",maxWidth:"100%",zoom:1}),a.append("<div id='sniperzoom-zoom"+e+"'></div>"),r=o("#sniperzoom-zoom"+e),r.css({position:"absolute",top:"0",width:"100%",height:"100%",backgroundImage:"url("+p+")",backgroundSize:2*n+"px "+2*i+"px",backgroundRepeat:"no-repeat",display:"none"}),u.hasClass("img-circle")&&r.addClass("img-circle")},setupEvents:function(){a.on({mouseenter:function(o){m=a.offset(),d=c.minzoom,t=c.minzoom-1,g.zoomImage(o,d),r.show()},mouseleave:function(){r.hide()},mousemove:function(o){g.moveImage(o)},touchstart:function(o){o.preventDefault(),m=a.offset(),d=c.minzoom,t=c.minzoom-1,g.zoomImage(o,d),r.show()},touchend:function(){r.hide()},touchmove:function(o){o.preventDefault();var e=o.originalEvent.touches[0].pageX,t=o.originalEvent.touches[0].pageY;e<=0+m.left||e>=n+m.left||t<=0+m.top||t>=i+m.top?r.hide():g.moveImage(o.originalEvent.touches[0])},touchleave:function(){r.hide()},mousewheel:function(o){1==c.allowzoom&&(o.preventDefault(),o.originalEvent.wheelDelta/120>0?d!=c.maxzoom&&(t++,d++,g.zoomImage(o,d)):d!=c.minzoom&&(t--,d--,g.zoomImage(o,d)))},DOMMouseScroll:function(o){o.preventDefault(),1==c.allowzoom&&(o.originalEvent.detail<0?d!=c.maxzoom&&(t++,d++,g.zoomImage(o.originalEvent,d)):d!=c.minzoom&&(t--,d--,g.zoomImage(o.originalEvent,d)))}})},moveImage:function(o){s=-o.pageX*t+m.left*t,l=-o.pageY*t+m.top*t,r.css({backgroundPosition:s+"px "+l+"px"})},zoomImage:function(o,e){r.css({backgroundSize:n*e+"px "+i*e+"px"}),g.moveImage(o)},generateRandomId:function(){for(var o="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;6>n;n++)o+=e.charAt(Math.floor(Math.random()*e.length));return o}},z={onLoad:function(){g.init(),g.styleElements(),g.setupEvents()},onResize:function(){g.init()}};o(window).load(z.onLoad),o(window).resize(z.onResize)}}(jQuery);